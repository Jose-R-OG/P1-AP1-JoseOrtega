@page "/huacales/Create"

@inject ToastService toastService
@inject EntradasHuacalesServices entradasHuacalesServices
@inject NavigationManager navigationManager
@rendermode InteractiveServer

<PageTitle>Crear Entrada huacales</PageTitle>
<Toasts class="p-3" AutoHide="true" Delay="5000" Placement="ToastsPlacement.TopRight" />
<EditForm Model="entradasHuacales" OnValidSubmit="Guardar">
	<DataAnnotationsValidator />
	<div class="container">
		<div class="card shadow-lg">
			<div class="card-header text-center">
				<h3 class="card-title"> Crear Entradas de Huacales</h3>
			</div>

			<div class="card-body">

				@*Fecha*@
				<div class="mb-3">
					<label class="form-label"><strong>Fecha</strong></label>
					<InputDate class="form-control" @bind-Value="entradasHuacales.Fecha"></InputDate>
					<ValidationMessage For="@(() => entradasHuacales.Fecha)" />
				</div>

				@*Nombre cliente*@
				<div class="mb-3">
					<label class="form-label"><strong>Nombres Cliente</strong></label>
					<InputText class="form-control" @bind-Value="entradasHuacales.NombreCliente" />
					<ValidationMessage For="@(() => entradasHuacales.NombreCliente)" />
				</div>

				@*Cantidad*@
				<div class="mb-3">
					<label class="form-label"><strong>Cantidad</strong></label>
					<InputNumber class="form-control" @bind-Value="entradasHuacales.Cantidad"></InputNumber>
					<ValidationMessage For="@(() => entradasHuacales.Cantidad)" />
				</div>

				@*Cantidad*@
				<div class="mb-3">
					<label class="form-label"><strong>Precio</strong></label>
					<InputNumber class="form-control" @bind-Value="entradasHuacales.Precio"></InputNumber>
					<ValidationMessage For="@(() => entradasHuacales.Precio)" />
				</div>

				<div class="mb-3">
					<label class="form-label"><strong>Importe</strong></label>
					<label class="form-control"> @(entradasHuacales.Precio*entradasHuacales.Cantidad)</label>
				</div>

			</div>

			@*Footer*@
			<div class="card-footer text-center mt-2">
				<div class="btn-group">
					@if(!creado)
					{
						<button type="submit" class="btn btn-outline-success bi bi-check-circle"> Guardar</button>
					}
					<a href="/huacales/index" class="btn btn-outline-secondary bi bi-arrow-bar-left"> Volver</a>
				</div>

			</div>

		</div>
	</div>

</EditForm>

@code {
	public EntradasHuacales entradasHuacales { get; set; } = new EntradasHuacales();
	public bool creado { get; set; } = false;

	public async Task Guardar()
	{
		creado = await entradasHuacalesServices.Guardar(entradasHuacales);
		if (creado)
		{
			toastService.ShowSuccess("La entrada se guardo correctamente");
		}
		else toastService.ShowError("No se pudo guardar la entrada");

	}

}
